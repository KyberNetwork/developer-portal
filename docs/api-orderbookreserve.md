---
id: OrderbookReserve
title: OrderbookReserve
---
# contract OrderbookReserve
is OrderIdManager, Utils2, [KyberReserveInterface](api-kyberreserveinterface.md), [OrderbookReserveInterface](api-orderbookreserveinterface.md),\
imports OrderListInterface, OrderIdManager, Utils2, [KyberReserveInterface](api-kyberreserveinterface.md), [OrderbookReserveInterface](api-orderbookreserveinterface.md),

*Source*: [OrderbookReserve.sol](https://github.com/KyberNetwork/smart-contracts/blob/auditv3/contracts/permissionless/OrderbookReserve.sol)
___

## INDEX

<AUTOGENERATED_TABLE_OF_CONTENTS>

## REFERENCE

### Events

### `OrderbookReserveTrade`
Event for logging of executed trades with this reserve.
___
event __OrderbookReserveTrade__(ERC20 srcToken, ERC20 dstToken, uint srcAmount, uint dstAmount)
| Parameter     | Type    | Description                                    |
| --------------|:-------:|:----------------------------------------------:|
| `srcToken`      | ERC20 | source ERC20 token contract address                               |
| `dstToken`         | ERC20 | destination ERC20 token contract address          |
| `srcAmount`   | uint    | source ERC20 token amount in its token decimals             |
| `dstAmount`  | uint    | destination ERC20 token amount in its token decimals         |
<br />

### `TokenDeposited`
Event for logging of successful token deposits.
___
event __TokenDeposited__(address indexed maker, uint amount)
| Parameter     | Type    | Description                                    |
| --------------|:-------:|:----------------------------------------------:|
| `maker`      | address | maker wallet or contract address                               |
| `amount`         | uint | Token deposit amount in its token decimals          |
<br />

### `EtherDeposited`
Event for logging of successful Ether deposits.
___
event __EtherDeposited__(address indexed maker, uint amount)
| Parameter     | Type    | Description                                    |
| --------------|:-------:|:----------------------------------------------:|
| `maker`      | address | maker wallet or contract address                               |
| `amount`         | uint | Ether wei amount deposited          |
<br />

### `KncFeeDeposited`
Event for logging of successful KNC token deposits
___
event __KncFeeDeposited__(address indexed maker, uint amount)
| Parameter     | Type    | Description                                    |
| --------------|:-------:|:----------------------------------------------:|
| `maker`      | address | maker wallet or contract address                               |
| `amount`         | uint | KNC token wei amount deposited          |
<br />

### `NewLimitOrder`
Event for logging of creation of limit orders
___
event __NewLimitOrder__(address indexed maker, uint32 orderId, bool isEthToToken, uint128 srcAmount, uint128 dstAmount, bool addedWithHint)
| Parameter     | Type    | Description                                    |
| --------------|:-------:|:----------------------------------------------:|
| `maker`      | address | maker wallet or contract address                               |
| `orderId`         | uint32 | order ID          |
| `isEthToToken`      | bool | True if Ether to token order submitted, false otherwise |
| `srcAmount`   | uint128    | source ERC20 token amount in its token decimals              |
| `dstAmount`  | uint128    | destination ERC20 token amount in its token decimals         |
| `addedWithHint`      | bool | True if order was added with a hint, false otherwise |
<br />

### `OrderUpdated`
Event for logging of order updates
___
event __OrderUpdated__(address indexed maker, bool isEthToToken, uint32 orderId, uint128 srcAmount, uint128 dstAmount, bool updatedWithHint)
| Parameter     | Type    | Description                                    |
| --------------|:-------:|:----------------------------------------------:|
| `maker`      | address | maker wallet or contract address                               |
| `isEthToToken`      | bool | True if Ether to token order submitted, false otherwise |
| `orderId`         | uint32 | order ID |
| `srcAmount`   | uint128    | updated source ERC20 token amount in its token decimals              |
| `dstAmount`  | uint128    | updated destination ERC20 token amount in its token decimals         |
| `updatedWithHint`      | bool | True if order was updated with a hint, false otherwise |
<br />

### `OrderCanceled`
Event for logging of order cancellations
___
event __OrderCanceled__(address indexed maker, bool isEthToToken, uint32 orderId, uint128 srcAmount, uint dstAmount)
| Parameter     | Type    | Description                                    |
| --------------|:-------:|:----------------------------------------------:|
| `maker`      | address | maker wallet or contract address                               |
| `isEthToToken`      | bool | True if Ether to token order submitted, false otherwise |
| `orderId`         | uint32 | order ID |
| `srcAmount`   | uint128    | updated source ERC20 token amount in its token decimals              |
| `dstAmount`  | uint    | updated destination ERC20 token amount in its token decimals         |
<br />

### `FullOrderTaken`
Event for logging of the full taking of an order.
___
event __FullOrderTaken__(address maker, uint32 orderId, bool isEthToToken)
| Parameter     | Type    | Description                                    |
| --------------|:-------:|:----------------------------------------------:|
| `maker`      | address | maker wallet or contract address                               |
| `orderId`         | uint32 | order ID |
| `isEthToToken`      | bool | True if Ether to token order submitted, false otherwise |
<br />

### `PartialOrderTaken`
Event for logging of the partial taking of an order.
___
event __PartialOrderTaken__(address maker, uint32 orderId, bool isEthToToken, bool isRemoved)
| Parameter     | Type    | Description                                    |
| --------------|:-------:|:----------------------------------------------:|
| `maker`      | address | maker wallet or contract address                               |
| `orderId`         | uint32 | order ID |
| `isEthToToken`      | bool | True if Ether to token order submitted, false otherwise |
| `isRemoved`   | bool    | True if order is removed from order list (because remaining order value is too low), false otherwise |
<br />

### Functions

### `OrderbookReserve`
Contract constructor. Note that constructor methods are called exactly once during contract instantiation and cannot be called again.
___
function __OrderbookReserve__(ERC20 knc, ERC20 reserveToken, address burner, address network, MedianizerInterface medianizer, OrderListFactoryInterface factory, uint minNewOrderUsd, uint maxOrdersPerTrade, uint burnFeeBps) public
| Parameter        | Type                     | Description                      |
| -----------------|:------------------------:|:--------------------------------:|
| `knc`  | ERC20                  | KNC token contract address    |
| `reserveToken` | ERC20  | Token contract address reserve is to support |
| `network`         | address                  | KyberNetwork contract address           |
| `medianizer`         | MedianizerInterface                  | Medianizer contract address. Medianizer is used for dollar price feeds           |
| `factory`  | OrderListFactoryInterface                  | OrderListFactory contract address, used to produce order lists for storing orders    |
| `minNewOrderUsd` | uint  | Minimum amount for new orders, in USD |
| `maxOrdersPerTrade`         | uint | Limit on maximum number of orders traversed per trade           |
| `burnFeeBps`         | uint | Amount of KNC fees in basis points for burning           |
___
Orderbook reserves are deployed by the PermissionlessOrderbookReserveLister contract.
<br />

### `addOrderBatch`
Submit multiple orders in a single transaction. All arrays for the input parameters should be of the same length. We denote order X to have array index X.
___
function __addOrderBatch__(bool[] isEthToToken, uint128[] srcAmount, uint128[] dstAmount,
        uint32[] hintPrevOrder, bool[] isAfterPrevOrder) public returns (bool)
				
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `isEthToToken`         | bool[]  | Index X is true if order X is an Ether to Token order |
| `srcAmount`   | uint128[]    | updated source ERC20 token amounts in their respective token decimals              |
| `dstAmount`  | uint128[]   | updated destination ERC20 token amounts in their respective decimals         |
| `hintPrevOrder` | uin32[]  | Hint ID for reducing gas costs, assuming a correct hint was provided. If unsure, use 0.      |
| `isAfterPrevOrder` | bool[]  | Index X is true if order X should be added right after previous added order. If unsure, use false. |
**Returns:**\
`true` if orders were successfully created
___
Web3 Example:
```js
const buyOrderOneSrcAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
const buyOrderOneDstAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const buyOrderTwoSrcAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
const buyOrderTwoDstAmount = new web3.utils.BN('2000000000000000') // Eg. 2000 ZIL
const sellOrderSrcAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const sellOrderDstAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH

transactionData = OrderbookReserve.methods.addOrderBatch(
  [true,true,false],
  [buyOrderOneSrcAmount,buyOrderTwoSrcAmount,sellOrderSrcAmount],
	[buyOrderOneDstAmount,buyOrderTwoDstAmount,sellOrderDstAmount],
	[0,0,0],
	[false,true,false]
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})

```
<br />

### `calcBurnAmount`
Calculate the amount of KNC tokens to be burnt for an order.
___
function __calcBurnAmount__(uint weiAmount) public view returns (uint)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `weiAmount`      | uint    | Ether wei amount equivalent of an order |
**Returns:**\
KNC token wei amount to be burnt for an order, depending on its Ether value.
___
Web3 Example:
```js
const orderEtherAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
result = await OrderbookReserve.methods.calcBurnAmount(orderEtherAmount).call()
```
<br />

### `calcBurnAmountFromFeeBurner`
Calculate the amount of KNC tokens to be burnt for an order, based on the KNC per ETH rate in the feeBurner contract.
___
function __calcBurnAmountFromFeeBurner__(uint weiAmount) public view returns (uint)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `weiAmount`      | uint    | Ether wei amount equivalent of an order |
**Returns:**\
KNC token wei amount to be burnt for an order, depending on its Ether value.
___
Web3 Example:
```js
const orderEtherAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
result = await OrderbookReserve.methods.calcBurnAmountFromFeeBurner(orderEtherAmount).call()
```
<br />

### `calcKncStake`
Calculate the amount of KNC tokens required to create an order.
___
function __calcKncStake__(uint weiAmount) public view returns (uint)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `weiAmount`      | uint    | Ether wei amount equivalent of an order |
**Returns:**\
KNC token wei amount required for to create an order, depending on its Ether value.
___
Web3 Example:
```js
const orderEtherAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
result = await OrderbookReserve.methods.calcKncStake(orderEtherAmount).call()
```
<br />

### `cancelEthToTokenOrder`
Cancel an Ether to Token order.
___
function __cancelEthToTokenOrder__(uint32 orderId) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `orderId`       | uint32   | order ID of the order to be cancelled           |
**Returns:**\
`true` if order was successfully cancelled
___
Web3 Example:
```js
const orderID = 5

transactionData = OrderbookReserve.methods.cancelEthToTokenOrder(
  orderID
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `cancelTokenToEthOrder`
Cancel a Token to Ether order.
___
function __cancelTokenToEthOrder__(uint32 orderId) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `orderId`       | uint32   | order ID of the order to be cancelled           |
**Returns:**\
`true` if order was successfully cancelled
___
Web3 Example:
```js
const orderID = 5

transactionData = OrderbookReserve.methods.cancelTokenToEthOrder(
  orderID
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `depositEther`
Deposit Ether into the reserve.
___
function __depositEther__(address maker) public payable
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `maker`       | address   | maker's wallet or contract address           |
___
Web3 Example:
```js
transactionData = OrderbookReserve.methods.depositEther(
  WALLET_ADDRESS, //maker
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData,
		value: etherWeiAmount //include Ether with the transaction
})
```
<br />

### `depositKncForFee`
Deposit KNC tokens into the reserve.
___
function __depositKncForFee__(address maker, uint amount) public
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `maker`       | address   | maker's wallet or contract address           |
| `amount`      | uint    | KNC token wei amount |
___
Web3 Example:
```js
//Assume that KNCToken.approve(ORDERBOOK_RESERVE_ADDRESS, allowance) transaction has been executed

transactionData = OrderbookReserve.methods.depositKncForFee(
  WALLET_ADDRESS, //maker
	depositAmount //depositAmount <= allowance
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `depositToken`
Deposit the ERC20 token into the reserve.
___
function __depositToken__(address maker, uint amount) public
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `maker`       | address   | maker's wallet or contract address           |
| `amount`      | uint    | ERC20 token amount in its token decimals |
___
Web3 Example:
```js
//Assume that token.approve(ORDERBOOK_RESERVE_ADDRESS, allowance) transaction has been executed

transactionData = OrderbookReserve.methods.depositToken(
  WALLET_ADDRESS, //maker
	depositAmount //depositAmount <= allowance
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `getConversionRate`
Gets the conversion rate for a pair of tokens at block number.
___
function __getConversionRate__(ERC20 src, ERC20 dest, uint srcQty, uint blockNumber) public view returns (uint)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `src`         | ERC20  | source ERC20 token contract address      |
| `dest`        | ERC20  | destination ERC20 token contract address |
| `srcQty`      | uint   |  source ERC20 token amount in its token decimals        |
| `blockNumber` | uint   | current block height or block number     |
**Returns:**\
Current conversion rate of token pairs at block number
___
Web3 Example:
```js
const src = '0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'  // ETH
const dest = '0xe41d2489571d322189246dafa5ebde1f4699f498' // ZRX
const srcQty = new web3.utils.BN('3000000000000000000000')
const blockNumber = 6015205

conversionRate = await OrderbookReserve.methods.getConversionRate(
  src,
  dest,
  srcQty,
  blockNumber
).call()
```
<br />

### `getEthToTokenAddOrderHint`
Obtain hint for creating new Ether to Token orders.
___
function __getEthToTokenAddOrderHint__(uint128 srcAmount, uint128 dstAmount) public view returns (uint32)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `srcAmount`      | uint128    | Ether wei amount             |
| `dstAmount`      | uint128    | destination ERC20 token amount in its token decimals        |
**Returns:**\
Order ID to use as the hint input parameter for the [`submitEthToTokenOrderWHint`](#submitethtotokenorderwhint) function.
___
Web3 Example:
```js
const srcAmount = new web3.utils.BN('1000000000000000000') // Eg. 10 ETH
const dstAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
hint = await OrderbookReserve.methods.getEthToTokenAddOrderHint(srcAmount,dstAmount).call()
```
<br />

### `getEthToTokenMakerOrderIds`
Obtain all active Ether To Token order IDs of a specified maker.
___
function __getEthToTokenMakerOrderIds__(address maker) public view returns (uint32[] orderList)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `_maker`      | address    | maker contract or wallet address |
**Returns:**\
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `orderList`      | uint32[]    | List of active Ether to Token order IDs |
___
Web3 Example:
```js
result = await OrderbookReserve.methods.getEthToTokenMakerOrderIds(makerAddress).call()
```
<br />

### `getEthToTokenOrder`
Obtain details of a specific Ether to Token order.
___
function __getEthToTokenOrder__(uint32 orderId) public view returns (
	address _maker,
	uint128 _srcAmount,
	uint128 _dstAmount,
	uint32 _prevId,
	uint32 _nextId
	)
	
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `orderId`      | uint32    | orderID of the order to obtain details from |

**Returns:**\
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `_maker`      | address    | maker contract or wallet address |
| `_srcAmount`      | address    | Ether wei amount |
| `_dstAmount`      | uint128    | destination ERC20 token amount in its token decimals |
| `_prevId`      | uint32    | Order ID before this order |
| `_nextId`      | uint32    | Order ID after this order |
___
Web3 Example:
```js
const orderID = 5
result = await OrderbookReserve.methods.getEthToTokenOrder(orderID).call()

console.log(result._maker)
console.log(result._srcAmount)
console.log(result._dstAmount)
console.log(result._prevId)
console.log(result._nextId)
```
<br />

### `getEthToTokenOrderList`
View all active Ether to Token orders.
___
function __getEthToTokenOrderList__() public view returns (uint32[] orderList)

**Returns:**\
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `orderList`      | uint32[]    | List of active order IDs |
___
Web3 Example:
```js
result = await OrderbookReserve.methods.getEthToTokenOrderList().call()
```
<br />

### `getEthToTokenUpdateOrderHint`
Obtain hint for updating Ether to Token orders.
___
function __getEthToTokenUpdateOrderHint__(uint32 orderId, uint128 srcAmount, uint128 dstAmount) public view returns (uint32)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `orderId`       | uint32   | orderID of the order to be updated           |
| `srcAmount`      | uint128    | Ether wei amount             |
| `dstAmount`      | uint128    | destination ERC20 token amount in its token decimals        |
**Returns:**\
Order ID to use as the hint input parameter for the [`submitEthToTokenOrderWHint`](#submitethtotokenorderwhint) function.
___
Web3 Example:
```js
const orderID = 5
const srcAmount = new web3.utils.BN('1000000000000000000') // Eg. 10 ETH
const dstAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
hint = await OrderbookReserve.methods.getEthToTokenUpdateOrderHint(orderID,srcAmount,dstAmount).call()
```
<br />

### `getTokenToEthAddOrderHint`
Obtain hint for creating new Token to Ether orders.
___
function __getTokenToEthAddOrderHint__(uint128 srcAmount, uint128 dstAmount) public view returns (uint32)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `srcAmount`      | uint128    | source ERC20 token amount in its token decimals               |
| `dstAmount`      | uint128    | Ether wei amount       |
**Returns:**\
Order ID to use as the hint input parameter for the [`submitTokenToEthOrderWHint`](#submittokentoethorderwhint) function.
___
Web3 Example:
```js
const srcAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const dstAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
hint = await OrderbookReserve.methods.getTokenToEthAddOrderHint(srcAmount,dstAmount).call()
```
<br />

### `getTokenToEthMakerOrderIds`
Obtain all active Token To Eth order IDs of a specified maker.
___
function __getTokenToEthMakerOrderIds__(address maker) public view returns (uint32[] orderList)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `_maker`      | address    | maker contract or wallet address |
**Returns:**\
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `orderList`      | uint32[]    | List of active Token to Ether order IDs |
___
Web3 Example:
```js
result = await OrderbookReserve.methods.getTokenToEthMakerOrderIds(makerAddress).call()
```
<br />

### `getTokenToEthOrder`
Obtain details of a specific Token To Ether order.
___
function __getTokenToEthOrder__(uint32 orderId) public view returns (
	address _maker,
	uint128 _srcAmount,
	uint128 _dstAmount,
	uint32 _prevId,
	uint32 _nextId
	)
	
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `orderId`      | uint32    | orderID of the order to obtain details from |

**Returns:**\
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `_maker`      | address    | maker contract or wallet address |
| `_srcAmount`      | address    | source ERC20 token amount in its token decimals |
| `_dstAmount`      | uint128    | Ether wei amount |
| `_prevId`      | uint32    | Order ID before this order |
| `_nextId`      | uint32    | Order ID after this order |
___
Web3 Example:
```js
const orderID = 5
result = await OrderbookReserve.methods.getTokenToEthOrder(orderID).call()

console.log(result._maker)
console.log(result._srcAmount)
console.log(result._dstAmount)
console.log(result._prevId)
console.log(result._nextId)
```
<br />

### `getTokenToEthOrderList`
View all active Token to Ether orders.
___
function __getTokenToEthOrderList__() public view returns (uint32[] orderList)

**Returns:**\
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `orderList`      | uint32[]    | List of active order IDs |
___
Web3 Example:
```js
result = await OrderbookReserve.methods.getTokenToEthOrderList().call()
```
<br />

### `getTokenToEthUpdateOrderHint`
Obtain hint for updating Token to Ether orders.
___
function __getTokenToEthUpdateOrderHint__(uint32 orderId, uint128 srcAmount, uint128 dstAmount) public view returns (uint32)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `orderId`       | uint32   | orderID of the order to be updated           |
| `srcAmount`      | uint128    | source ERC20 token amount in its token decimals               |
| `dstAmount`      | uint128    | Ether wei amount       |
**Returns:**\
Order ID to use as the hint input parameter for the [`updateTokenToEthOrderWHint`](#updatetokentoethorderwhint) function.
___
Web3 Example:
```js
const orderID = 5
const srcAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const dstAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
hint = await OrderbookReserve.methods.getTokenToEthUpdateOrderHint(orderID,srcAmount,dstAmount).call()
```
<br />

### `kncRateBlocksTrade`
If KNC depreciates too much, trades are blocked because the staked KNC tokens for active orders are insufficient.
___
function __kncRateBlocksTrade__() public view returns (bool)
**Returns:**\
True if orderbook reserve's trades are blocked due to KNC depreciation.
___
Web3 Example:
```js
kncRateBlocksTrade = await OrderbookReserve.methods.kncRateBlocksTrade().call()

```
<br />

### `makerRequiredKncStake`
Calculate the total amount of KNC tokens required for all active orders made by a maker.
___
function __makerRequiredKncStake__(address maker) public view returns (uint)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `maker`      | address    | maker contract or wallet address |
**Returns:**\
KNC token wei amount required for all active orders made by a maker
___
Web3 Example:
```js
result = await OrderbookReserve.methods.makerRequiredKncStake(makerAddress).call()
```
<br />

### `makerUnlockedKnc`
Calculate the KNC tokens available for withdrawal or use in creating new orders.
___
function __makerRequiredKncStake__(address maker) public view returns (uint)
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `maker`      | address    | maker contract or wallet address |
**Returns:**\
KNC token wei amount available for withdrawal or use in creating new orders
___
Web3 Example:
```js
result = await OrderbookReserve.methods.makerUnlockedKnc(makerAddress).call()
```
<br />

### `setMinOrderSizeEth`
Updates the Ether minimum order size, due to price volatility of Ether against USD.
___
function __setMinOrderSizeEth__() public
___
Web3 Example:
```js
transactionData = OrderbookReserve.methods.setMinOrderSizeEth().encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `setKncPerEthBaseRate`
Updates the amount of KNC per ETH base rate.
___
function __setKncPerEthBaseRate__() public
___
Web3 Example:
```js
transactionData = OrderbookReserve.methods.setKncPerEthBaseRate().encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `submitEthToTokenOrder`
Submit an Ether to Token order.
___
function __submitEthToTokenOrder__(uint128 srcAmount, uint128 dstAmount) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `srcAmount`      | uint128    | Ether wei amount             |
| `dstAmount`      | uint128    | destination ERC20 token amount in its token decimals        |
**Returns:**\
`true` if order was successfully created
___
Web3 Example:
```js
const srcAmount = new web3.utils.BN('1000000000000000000') // Eg. 10 ETH
const dstAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL

transactionData = OrderbookReserve.methods.submitEthToTokenOrder(
  srcAmount,
  dstAmount,
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `submitEthToTokenOrderWHint`
Submit an Ether to Token order using a hint. The hint can be obtained using the [`getEthToTokenAddOrderHint`](#getethtotokenaddorderhint) function. 
___
function __submitEthToTokenOrderWHint__(uint128 srcAmount, uint128 dstAmount, uint32 hintPrevOrder) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `srcAmount`      | uint128    | Ether wei amount              |
| `dstAmount`      | uint128    | destination ERC20 token amount in its token decimals        |
| `hintPrevOrder` | uint32     | Hint ID for reducing gas costs, assuming a correct hint was provided. |
**Returns:**\
`true` if order was successfully created
___
Web3 Example:
```js
const srcAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
const dstAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
var hint = await OrderbookReserve.methods.getEthToTokenAddOrderHint(srcAmount, dstAmount).call()

transactionData = OrderbookReserve.methods.submitEthToTokenOrderWHint(
  srcAmount,
  dstAmount,
	hint
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `submitTokenToEthOrder`
Submit a Token to Ether order.
___
function __submitTokenToEthOrder__(uint128 srcAmount, uint128 dstAmount) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `srcAmount`      | uint128    | source ERC20 token amount in its token decimals               |
| `dstAmount`      | uint128    | Ether wei amount       |
**Returns:**\
`true` if order was successfully created
___
Web3 Example:
```js
const srcAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const dstAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH

transactionData = OrderbookReserve.methods.submitTokenToEthOrder(
  srcAmount,
  dstAmount,
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `submitTokenToEthOrderWHint`
Submit a Token to Ether order using a hint. The hint can be obtained using the [`getTokenToEthAddOrderHint`](#gettokentoethaddorderhint) function. 
___
function __submitTokenToEthOrderWHint__(uint128 srcAmount, uint128 dstAmount, uint32 hintPrevOrder) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `srcAmount`      | uint128    | source ERC20 token amount in its token decimals               |
| `dstAmount`      | uint128    | Ether wei amount        |
| `hintPrevOrder` | uint32     | Hint ID for reducing gas costs, assuming a correct hint was provided |
**Returns:**\
`true` if order was successfully created
___
Web3 Example:
```js
const srcAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const dstAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
var hint = await OrderbookReserve.methods.getTokentoEthAddOrderHint(srcAmount, dstAmount).call()

transactionData = OrderbookReserve.methods.submitTokenToEthOrderWHint(
  srcAmount,
  dstAmount,
	hint
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `trade`
Executes a trade.
___
function __trade__(ERC20 srcToken, uint srcAmount, ERC20 destToken, address destAddress, uint conversionRate, bool validate) public payable returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `srcToken`       | ERC20   | source ERC20 token contract address            |
| `srcAmount`      | uint    | source ERC20 token amount in its token decimals               |
| `destToken`      | ERC20   | destination ERC20 token contract address       |
| `destAddress`    | address | recipient address for destination ERC20 tokens |
| `conversionRate` | uint    | conversion rate between srcToken and destToken |
| `validate`       | bool | True if additional validations are to be performed     |
**Returns:**\
`true` if the trade was successful, otherwise `false` if unsuccessful
<br />

### `updateEthToTokenOrder`
Update an Ether to Token order.
___
function __updateEthToTokenOrder__(uint32 orderId, uint128 newSrcAmount, uint128 newDstAmount) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `orderId`       | uint32   | order ID of the order to be updated           |
| `newSrcAmount`      | uint128    | updated Ether wei amount |
| `newDstAmount`      | uint128   | updated destination ERC20 token amount in its token decimals |
**Returns:**\
`true` if order was successfully updated
___
Web3 Example:
```js
const orderID = 5
const srcAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
const dstAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL


transactionData = OrderbookReserve.methods.updateEthToTokenOrder(
  orderID,
	srcAmount,
	dstAmount
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `updateEthToTokenOrderWHint`
Update an Ether to Token order. The hint can be obtained using the [`getEthToTokenUpdateOrderHint`]() function.
___
function __updateEthToTokenOrderWHint__(uint32 orderId, uint128 newSrcAmount, uint128 newDstAmount, uint32 hintPrevOrder) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `orderId`       | uint32   | order ID of the order to be updated           |
| `newSrcAmount`      | uint128    | updated Ether wei amount |
| `newDstAmount`      | uint128   | updated destination ERC20 token amount in its token decimals |
| `hintPrevOrder`      | uint32   | Hint ID for reducing gas costs, assuming a correct hint was provided |
**Returns:**\
`true` if order was successfully updated
___
Web3 Example:
```js
const orderID = 5
const srcAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
const dstAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
var hint = await OrderbookReserve.methods.getEthToTokenUpdateOrderHint(orderID, srcAmount, dstAmount).call()

transactionData = OrderbookReserve.methods.updateEthToTokenOrderWHint(
  orderID,
	srcAmount,
	dstAmount,
	hint
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `updateOrderBatch`
Update multiple orders in a single transaction. All arrays for the input parameters should be of the same length. We denote order X to have array index X.
___
function __updateOrderBatch__(bool[] isEthToToken, uint32[] orderId, uint128[] srcAmount, uint128[] dstAmount,
        uint32[] hintPrevOrder) public returns (bool)
				
| Parameter     | Type   | Description                              |
| ------------- |:------:|:----------------------------------------:|
| `isEthToToken`         | bool array  | Index X is true if order X is an Ether to Token order |
| `orderId` | uint32 array  | order IDs of orders that are to be updated |
| `srcAmount`   | uint128 array    | updated source ERC20 token amounts in their respective token decimals              |
| `dstAmount`  | uint128 array   | updated destination ERC20 token amounts in their respective decimals         |
| `hintPrevOrder` | uin32 array  | Hint ID for reducing gas costs, assuming a correct hint was provided. If unsure, use 0.      |
**Returns:**\
`true` if orders were successfully created
___
Web3 Example:
```js
const orderIDs = [5,3,11]
const buyOrderOneSrcAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
const buyOrderOneDstAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const buyOrderTwoSrcAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
const buyOrderTwoDstAmount = new web3.utils.BN('2000000000000000') // Eg. 2000 ZIL
const sellOrderSrcAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const sellOrderDstAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH

transactionData = OrderbookReserve.methods.addOrderBatch(
  [true,true,false],
	orderIDs,
  [buyOrderOneSrcAmount,buyOrderTwoSrcAmount,sellOrderSrcAmount],
	[buyOrderOneDstAmount,buyOrderTwoDstAmount,sellOrderDstAmount],
	[0,0,0]
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})

```
<br />

### `updateTokenToEthOrder`
Update a Token to Ether order.
___
function __updateTokenToEthOrder__(uint32 orderId, uint128 newSrcAmount, uint128 newDstAmount) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `orderId`       | uint32   | order ID of the order to be updated           |
| `newSrcAmount`      | uint128    | updated source ERC20 token amount in its token decimals |
| `newDstAmount`      | uint128   | updated Ether wei amount |
**Returns:**\
`true` if order was successfully updated
___
Web3 Example:
```js
const orderID = 5
const srcAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const dstAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH

transactionData = OrderbookReserve.methods.updateTokenToEthOrder(
  orderID,
	srcAmount,
	dstAmount
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `updateTokenToEthOrderWHint`
Update a Token to Ether order. The hint can be obtained using the [`getTokenToEthUpdateOrderHint`]() function.
___
function __updateTokenToEthOrderWHint__(uint32 orderId, uint128 newSrcAmount, uint128 newDstAmount, uint32 hintPrevOrder) public returns (bool)
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `orderId`       | uint32   | orderID of the order to be updated           |
| `newSrcAmount`      | uint128    | updated source ERC20 token amount in its token decimals |
| `newDstAmount`      | uint128   | updated Ether wei amount |
| `hintPrevOrder`      | uint32   | Hint ID for reducing gas costs, assuming a correct hint was provided |
**Returns:**\
`true` if order was successfully updated
___
Web3 Example:
```js
const orderID = 5
const srcAmount = new web3.utils.BN('3000000000000000') // Eg. 3000 ZIL
const dstAmount = new web3.utils.BN('10000000000000000000') // Eg. 10 ETH
var hint = await OrderbookReserve.methods.getTokenToEthUpdateOrderHint(orderID, srcAmount, dstAmount).call()

transactionData = OrderbookReserve.methods.updateTokenToEthOrderWHint(
  orderID,
	srcAmount,
	dstAmount,
	hint
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData
})
```
<br />

### `withdrawEther`
Withdraw deposited Ether out of the reserve to `msg.sender`.
___
function __withdrawEther__(uint amount) public
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `amount`       | uint   | Ether wei amount           |
___
Web3 Example:
```js
transactionData = OrderbookReserve.methods.withdrawEther(
  tokenAmount,
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData,
})
```
<br />

### `withdrawKncFee`
Withdraw deposited KNC tokens out of the reserve to `msg.sender`.
___
function __withdrawKncFee__(uint amount) public
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `amount`       | uint   | KNC token wei amount            |
___
Web3 Example:
```js
transactionData = OrderbookReserve.methods.withdrawKncFee(
  tokenAmount,
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData,
})
```
<br />

### `withdrawToken`
Withdraw deposited ERC20 tokens out of the reserve to `msg.sender`.
___
function __withdrawToken__(uint amount) public
| Parameter        | Type    | Description                                    |
| ---------------- |:-------:|:----------------------------------------------:|
| `amount`       | uint   | ERC20 token amount in its token decimals           |
___
Web3 Example:
```js
transactionData = OrderbookReserve.methods.withdrawToken(
  tokenAmount,
).encodeABI()

txReceipt = await web3.eth.sendTransaction({
    from: WALLET_ADDRESS,
    to: ORDERBOOK_RESERVE_ADDRESS,
    data: transactionData,
})
```
<br />


