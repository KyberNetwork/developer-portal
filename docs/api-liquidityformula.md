---
id: LiquidityFormula
title: LiquidityFormula
---
## INDEX

<AUTOGENERATED_TABLE_OF_CONTENTS>

## contract LiquidityFormula
is [UtilMath](api-liquidityformula.md#contract-utilmath)

*Source*: [LiquidityFormula.sol](https://github.com/KyberNetwork/smart-contracts/blob/master/contracts/LiquidityFormula.sol)

The LiquidityFormula contract's role is to provide a mathematical set of formula functions which will be used by the LiquidityConversionRates contract.
___

### Functions

### `checkMultOverflow`
Checks for overflow when multiplying two uints.
___
function __checkMultOverflow__(uint x, uint y) public pure returns (bool)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `x`       | uint  | X value     |
| `y`       | uint  | Y value     |
**Returns:**\
`true` if overflowed, otherwise `false`

<br />

### `compactFraction`
Returns a compact fraction of price and quantity.
___
function __compactFraction__(uint p, uint q, uint precision) public pure returns (uint, uint)
| Parameter   | Type  | Description |
| ----------- |:-----:|:-----------:|
| `p`         | uint  | price       |
| `q`         | uint  | quanity     |
| `precision` | uint  | precision   |
**Returns:**\
Compact fraction

<br />

### `countLeadingZeros`
Count and return the number of leading zeros of price over quantity.
___
function __countLeadingZeros__(uint p, uint q) public pure returns (uint)
| Parameter   | Type  | Description |
| ----------- |:-----:|:-----------:|
| `p`         | uint  | price       |
| `q`         | uint  | quantity    |
**Returns:**\
Number of leading zeros

<br />

### `exp`
Exponential function returning the value of price over quantity.
___
function __exp__(uint p, uint q, uint precision) public pure returns (uint)
| Parameter   | Type  | Description |
| ----------- |:-----:|:-----------:|
| `p`         | uint  | price       |
| `q`         | uint  | quantity    |
| `precision` | uint  | precision   |
**Returns:**\
Value resulting from exponential function

<br />

### `log2ForSmallNumber`
Get the log base 2 for X that is within [1,2).
___
function __log2ForSmallNumber__(uint x, uint numPrecisionBits) public pure returns (uint)
| Parameter          | Type  | Description              |
| ------------------ |:-----:|:------------------------:|
| `x`                | uint  | X value                  |
| `numPrecisionBits` | uint  | number of precision bits |
**Returns:**\
Log base 2 value for X

<br />

### `logBase2`
Get the log base 2 of price over quantity.
___
function __logBase2__(uint p, uint q, uint numPrecisionBits) public pure returns (uint)
| Parameter          | Type  | Description              |
| ------------------ |:-----:|:------------------------:|
| `p`                | uint  | price                    |
| `q`                | uint  | quantity                 |
| `numPrecisionBits` | uint  | number of precision bits |
**Returns:**\
Log base 2 value for price over quantity

<br />

### `ln`
Get the logarithm of price over quantity
___
function __ln__(uint p, uint q, uint numPrecisionBits) public pure returns (uint)
| Parameter          | Type  | Description              |
| ------------------ |:-----:|:------------------------:|
| `p`                | uint  | price                    |
| `q`                | uint  | quantity                 |
| `numPrecisionBits` | uint  | number of precision bits |
**Returns:**\
Logarithm of price over quantity

<br />

## contract UtilMath

*Source*: [LiquidityFormula.sol](https://github.com/KyberNetwork/smart-contracts/blob/master/contracts/LiquidityFormula.sol)

The UtilMath contract is within LiquidityFormula.sol, and is directly inherited and used by the LiquidityFormula contract.
___

### Functions

### `pE`
Price (ETH/Token) will be given by P(E), which will be a function of the current ETH reserve size.
___
function __pE__(uint r, uint pMIn, uint e, uint precision) public pure returns (uint)
| Parameter   | Type  | Description  |
| ----------- |:-----:|:------------:|
| `r`         | uint  | r value      |
| `pMIn`      | uint  | pMIn value   |
| `e`         | uint  | e value      |
| `precision` | uint  | precision    |
**Returns:**\
Price of ETH to token

<br />

### `deltaEFunc`
Returns detla ETH. ∆E can be positive (increasing the amount of ETH in the reserve and selling
tokens to the trader), or negative.
___
function __deltaEFunc__(uint r, uint pMIn, uint e, uint deltaT, uint precision, uint numPrecisionBits) public pure returns (uint)
| Parameter          | Type  | Description              |
| ------------------ |:-----:|:------------------------:|
| `r`                | uint  | r value                  |
| `pMIn`             | uint  | pMIn value               |
| `e`                | uint  | e value                  |
| `deltaT`           | uint  | deltaT value             |
| `precision`        | uint  | precision                |
| `numPrecisionBits` | uint  | number of precision bits |
**Returns:**\
Delta ETH

<br />

### `deltaTFunc`
Returns delta tokens. ∆T can be positive (increasing the amount of tokens in the reserve and selling
ETH to the trader), or negative.
___
function __deltaTFunc__(uint r, uint pMIn, uint e, uint deltaE, uint precision) public pure returns (uint)
| Parameter   | Type  | Description  |
| ----------- |:-----:|:------------:|
| `r`         | uint  | r value      |
| `pMIn`      | uint  | pMIn value   |
| `e`         | uint  | e value      |
| `deltaE`    | uint  | deltaE value |
| `precision` | uint  | precision    |
**Returns:**\
Delta tokens
